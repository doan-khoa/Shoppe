if (self.CavalryLogger) { CavalryLogger.start_js(["3cLbSZi"]); }

__d("RTCUserRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";c=(a=b("immutable")).Record({audioStreamMuteStates:a.Map(),FBID:"UNDEFINED",isGuestUser:!1,isMessengerUser:!1,isPartiesUser:!1,isVideoSubscribed:!1,lastConnectedAt:0,participantState:null,pausedDownlink:!1,profilePictureUrl:null,profileUrl:null,roomLocation:null,screenStreams:a.Set(),streams:a.Set(),userName:"",userShortName:"",vanity:""});d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c);e.exports=d}),null);
__d("ChromeExtensionInstallError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,b)||this;e.message=b;e.$ChromeExtensionInstallError3=b;e.$ChromeExtensionInstallError1=d;e.$ChromeExtensionInstallError2=c;e.name=e.constructor.name;return e}var c=b.prototype;c.toString=function(){return this.name+": "+[this.message,this.$ChromeExtensionInstallError2,this.$ChromeExtensionInstallError1].join("-")};c.getTypedMessage=function(){return this.$ChromeExtensionInstallError3};c.getInstallType=function(){return this.$ChromeExtensionInstallError2};return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("CollabRTCChromeScreenSharingExtensionConstants",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({CancelChooseDesktopMedia:"cancelChooseDesktopMedia",ClearNotification:"clearNotification",CreateNotification:"createNotification",FocusTabAndWindow:"focusTabAndWindow",GetAllNotifications:"getAllNotifications",GetLastFocusedWindow:"getLastFocusedWindow",GetNotificationsPermissionLevel:"getNotificationsPermissionLevel",GetStreamID:"getStreamID",GetTabAndWindowForSender:"getTabAndWindowForSender",GetTabForSender:"getTabForSender",GetWindow:"getWindow",Ping:"ping",UpdateNotification:"updateNotification",UpdateTab:"updateTab",UpdateWindow:"updateWindow",CreateWindow:"createWindow"});f.CollabRTCChromeScreenSharingExtensionFeature=a}),66);
__d("RTCChromeExtensionListener",["DateConsts","EventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$RTCChromeExtensionListener1=!1;c.$RTCChromeExtensionListener2=null;c.$RTCChromeExtensionListener5=function(a){var b=a;if(a.type==="notificationButtonClicked"){var d=a.buttonIndex;a=a.notificationId;d!==0&&d!==1&&(b={type:"notificationClicked",notificationId:a})}c.emit(b.type,b)};c.$RTCChromeExtensionListener6=function(a){a.onMessage.removeListener(c.$RTCChromeExtensionListener5),c.$RTCChromeExtensionListener2=null,c.emit("portDisconnected"),c.$RTCChromeExtensionListener1===!1&&c.$RTCChromeExtensionListener7(d("DateConsts").MS_PER_SEC)};c.$RTCChromeExtensionListener3=b;return c}var c=b.prototype;c.$RTCChromeExtensionListener4=function(){if(this.$RTCChromeExtensionListener2==null)try{var a=window.chrome.runtime.connect(this.$RTCChromeExtensionListener3,{name:"notifications"});a.onMessage.addListener(this.$RTCChromeExtensionListener5);a.onDisconnect.addListener(this.$RTCChromeExtensionListener6);this.$RTCChromeExtensionListener2=a;this.emit("portConnected")}catch(a){this.emit("portConnectionError",a)}};c.$RTCChromeExtensionListener7=function(a){var b=this;a===void 0&&(a=10);window.setTimeout(function(){b.$RTCChromeExtensionListener4()},a)};c.connect=function(){this.$RTCChromeExtensionListener7()};c.disconnect=function(){this.$RTCChromeExtensionListener2!=null&&(this.$RTCChromeExtensionListener1=!0,this.$RTCChromeExtensionListener2.disconnect(),this.$RTCChromeExtensionListener2=null)};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("isInternURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)intern(mc)?\\.facebook\\.com$","i");function a(a){return g.test(a.getDomain())}f["default"]=a}),66);
__d("RTCChromeScreenSharingExtension",["Promise","RTCChromeExtensionListener","URI","gkx","isInternURI","isInternalFBURI","isWorkplaceDotComURI","uuid"],(function(a,b,c,d,e,f,g){function a(){var a=c("URI").getRequestURI();return c("gkx")("1290293")&&(c("isInternURI")(a)||c("isInternalFBURI")(a))}function d(){return c("isWorkplaceDotComURI")(c("URI").getRequestURI())}var h="ncfpggehkhmjpdjpefomjchjafhmbnai",i="flakgngfgjpjpfjknnkcipdebaigofln",j="hmobhiioligjpeieihehfjlkmmkjemfl";j=d()===!0?j:h;function k(a,c){return new(b("Promise"))(function(b,d){window.chrome.runtime.sendMessage(c,a,function(a){if(a!=null)typeof a==="object"&&a.type==="error"?d(new Error(a.message)):b(a);else{a=window.chrome.runtime.lastError.message;d(new Error(a))}})})}function e(a){return new(c("RTCChromeExtensionListener"))(a)}function f(a,b){b===void 0&&(b=["screen","window","tab"]);return k({type:"getStreamID",sources:b},a)}function l(a,b){return k({type:"cancel",requestID:a},b)}function m(){return c("uuid")()}g.shoulUseInternExtension=a;g.shoulUseWorkplaceExtension=d;g.INTERN_EXTENSION_ID=i;g.EXTENSION_ID=j;g.sendExtensionRequest=k;g.connectToNotifications=e;g.getMediaSourceFromExtension=f;g.stopExtensionScreenSharing=l;g.generateNotificationID=m}),98);
__d("CollabRTCChromeScreenSharingExtension",["invariant","ChromeExtensionInstallError","CollabRTCChromeScreenSharingExtensionConstants","DateConsts","Promise","RTCChromeScreenSharingExtension","URI","emptyFunction","err","isFacebookURI","orEmptyArray","regeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";var i="DIALOG_USER_CANCEL",j="EXTENSION_NOT_FOUND",k="MESSAGESENDER_TAB_UNDEFINED",l="REQUEST_ID_UNDEFINED",m="UNEXPECTED_ERROR",n="FEATURE_NOT_SUPPORTED";a="data-fb-only-screensharing-extension-available";var o="data-intern-screensharing-extension-available";e="data-wp-screensharing-extension-available";var p=d("RTCChromeScreenSharingExtension").shoulUseWorkplaceExtension()?e:a;f="data-fb-only-screensharing-extension-features";var q="data-intern-screensharing-extension-features";e="data-wp-screensharing-extension-features";var r=d("RTCChromeScreenSharingExtension").shoulUseWorkplaceExtension()?e:f,s=250,t=2*d("DateConsts").MS_PER_MIN,u=2;a=function(){function a(){this.DIALOG_USER_CANCEL=i,this.EXTENSION_NOT_FOUND=j,this.MESSAGESENDER_TAB_UNDEFINED=k,this.REQUEST_ID_UNDEFINED=l,this.UNEXPECTED_ERROR=m,this.FEATURE_NOT_SUPPORTED=n,this.$2=d("RTCChromeScreenSharingExtension").EXTENSION_ID,this.$3=p,this.$4=r}var e=a.prototype;e.isInstalled=function(){var a=document;a=a.documentElement;if(d("RTCChromeScreenSharingExtension").shoulUseInternExtension()&&(a!=null&&a.hasAttribute(o))){this.$2=d("RTCChromeScreenSharingExtension").INTERN_EXTENSION_ID;this.$3=o;return!0}return a!=null&&a.hasAttribute(this.$3)?!0:!1};e.isFeatureSupported=function(a){if(!this.isInstalled())return!1;var b=document;b=b.documentElement;b=c("orEmptyArray")(b==null?void 0:(b=b.getAttribute(d("RTCChromeScreenSharingExtension").shoulUseInternExtension()?q:this.$4))==null?void 0:b.split(","));return b.indexOf(a)>=0};e.throwIfNotInstalled=function(){if(this.isInstalled()!==!0)throw c("err")(j)};e.throwIfFeatureNotSupported=function(a){this.throwIfNotInstalled();if(!this.isFeatureSupported(a)){a=new Error(n);a.stack;throw a}};e.$5=function(a,d){var e=this,f=(d=a)!=null?(d=d.chrome)!=null?d.webstore:d:d;if(f==null)return b("Promise").reject(new(c("ChromeExtensionInstallError"))("CHROME_WEBSTORE_UNDEFINED","inline"));var g=window.document.documentElement;v(this.getExtensionURL(),window.document);a!==window&&v(this.getExtensionURL(),a.document);return new(b("Promise"))(function(a,b){f.install(e.getExtensionURL(),function(){g!=null&&g.setAttribute(e.getPresenseAttr(),"true"),a()},function(a,d){b(new(c("ChromeExtensionInstallError"))("EXTENSION_INSTALL_FAILED","inline",d))})}).then(function(){e.$6(u);return"inline"})};e.$7=function(a){var d=this;if(this.isInstalled())return b("Promise").resolve("store");v(this.getExtensionURL(),window.document);window.open(this.getExtensionURL(),"_blank");return this.$6(t/s).then(function(){var a=window.document.documentElement;a.setAttribute(d.getPresenseAttr(),"true");return"store"})["catch"](function(){throw new(c("ChromeExtensionInstallError"))("EXTENSION_STORE_INSTALL_TIMEOUT","store")})};e.getPresenseAttr=function(){return this.$3};e.getFeaturesAttr=function(){return this.$4};e.isInlineInstallCapableDomain=function(){return c("isFacebookURI")(c("URI").getRequestURI())};e.install=function(a){return this.isInstalled()?b("Promise").resolve():this.$8(a).then(c("emptyFunction"))["catch"](function(a){throw a})};e.$8=function(a){var b;if(!this.isInlineInstallCapableDomain())return this.$7(a);b=(b=window)!=null?(b=b.chrome)!=null?b.webstore:b:b;if(b==null)return this.$7(a);return window.opener?this.$7(a):this.$5(window,a)};e.getSourceID=function(a){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(this.isInstalled()){f.next=2;break}throw c("err")(j);case 2:f.next=4;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").getMediaSourceFromExtension(this.$2,a));case 4:e=f.sent;f.t0=e.type;f.next=f.t0==="streamID"?8:f.t0==="canceledGetStreamID"?10:11;break;case 8:this.$1=e.requestID;return f.abrupt("return",e.streamID);case 10:throw c("err")(i);case 11:throw c("err")(m);case 12:case"end":return f.stop()}},null,this)};e.getExtensionID=function(){return this.$2};e.getExtensionURL=function(){return"https://chrome.google.com/webstore/detail/"+this.$2};e.stop=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").stopExtensionScreenSharing(this.$1,this.$2));case 2:this.$1=null;case 3:case"end":return a.stop()}},null,this)};e.$6=function(a){var b=this;return d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"ping"},this.$2)["catch"](function(c){if(a<1)throw c;return w(s).then(function(){return b.$6(a-1)})})};e.isMinimumVersionNumber=function(a,c,e){var f,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:this.throwIfNotInstalled();l.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"ping"},this.$2));case 3:f=l.sent;g=f.version;h=g.split(".").map(function(a){return parseInt(a,10)}),i=h[0],j=h[1],k=h[2];if(!(i>=a)){l.next=10;break}if(!(j>c)){l.next=9;break}return l.abrupt("return",!0);case 9:return l.abrupt("return",j===c&&k>=e);case 10:return l.abrupt("return",!1);case 11:case"end":return l.stop()}},null,this)};e.focusTabAndWindow=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"focusTabAndWindow"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};e.getLastFocusedWindow=function(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfNotInstalled();e.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"getLastFocusedWindow",getInfo:a},this.$2));case 3:c=e.sent;return e.abrupt("return",c.window);case 5:case"end":return e.stop()}},null,this)};e.getTabForSender=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"getTabForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.tab);case 5:case"end":return c.stop()}},null,this)};e.getTabAndWindowForSender=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"getTabAndWindowForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};e.getWindow=function(a,c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:this.throwIfNotInstalled();f.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"getWindow",windowId:a,getInfo:c},this.$2));case 3:e=f.sent;return f.abrupt("return",e.window);case 5:case"end":return f.stop()}},null,this)};e.updateTab=function(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:this.throwIfNotInstalled();e={type:"updateTab",updateProperties:a};c!==void 0&&(e.tabId=c);g.next=5;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest(e,this.$2));case 5:f=g.sent;return g.abrupt("return",f.tab);case 7:case"end":return g.stop()}},null,this)};e.updateWindow=function(a,c){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:this.throwIfNotInstalled();f.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"updateWindow",windowId:a,updateInfo:c},this.$2));case 3:e=f.sent;return f.abrupt("return",e.window);case 5:case"end":return f.stop()}},null,this)};e.createWindow=function(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfFeatureNotSupported(d("CollabRTCChromeScreenSharingExtensionConstants").CollabRTCChromeScreenSharingExtensionFeature.CreateWindow);e.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"createWindow",createData:a},this.$2));case 3:c=e.sent;return e.abrupt("return",c.window);case 5:case"end":return e.stop()}},null,this)};e.clearNotification=function(a){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:e=g.sent;if(!(e===!1)){g.next=5;break}throw c("err")("Chrome extension notifications permission not granted");case 5:g.next=7;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"clearNotification",notificationId:a},this.$2));case 7:f=g.sent;return g.abrupt("return",f.wasCleared);case 9:case"end":return g.stop()}},null,this)};e.createNotification=function(a){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:e=g.sent;if(!(e===!1)){g.next=5;break}throw c("err")("Chrome extension notifications permission not granted");case 5:g.next=7;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"createNotification",notificationId:d("RTCChromeScreenSharingExtension").generateNotificationID(),options:a},this.$2));case 7:f=g.sent;return g.abrupt("return",f.notificationId);case 9:case"end":return g.stop()}},null,this)};e.getAllNotifications=function(){var a,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:a=f.sent;if(!(a===!1)){f.next=5;break}throw c("err")("Chrome extension notifications permission not granted");case 5:f.next=7;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"getAllNotifications"},this.$2));case 7:e=f.sent;return f.abrupt("return",Object.keys(e.notifications));case 9:case"end":return f.stop()}},null,this)};e.getNotificationsPermissionLevel=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"getNotificationsPermissionLevel"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.level);case 5:case"end":return c.stop()}},null,this)};e.updateNotification=function(a,e){var f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:f=h.sent;if(!(f===!1)){h.next=5;break}throw c("err")("Chrome extension notifications permission not granted");case 5:h.next=7;return b("regeneratorRuntime").awrap(d("RTCChromeScreenSharingExtension").sendExtensionRequest({type:"updateNotification",notificationId:a,options:e},this.$2));case 7:g=h.sent;return h.abrupt("return",g.wasUpdated);case 9:case"end":return h.stop()}},null,this)};e.isNotificationPermissionGranted=function(){var a;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a="denied";d.prev=1;d.next=4;return b("regeneratorRuntime").awrap(this.getNotificationsPermissionLevel());case 4:a=d.sent;d.next=10;break;case 7:d.prev=7,d.t0=d["catch"](1),a="denied";case 10:d.t1=a;d.next=d.t1==="granted"?13:d.t1==="denied"?14:15;break;case 13:return d.abrupt("return",!0);case 14:return d.abrupt("return",!1);case 15:throw c("err")("Received an unexpected permission level: "+a);case 16:case"end":return d.stop()}},null,this,[[1,7]])};return a}();function v(a,b){var c="chrome-webstore-item";if(!b.querySelector('link[href="'+a+'"][rel="'+c+'"]')){var d=b.createElement("link");d.setAttribute("href",a);d.setAttribute("rel",c);b.head!=null||h(0,6240);b.head.appendChild(d)}}function w(a){return new(b("Promise"))(function(b){return window.setTimeout(b,a)})}e=new a();g["default"]=e}),98);
__d("CollabRTCChromeScreenSharing",["CollabRTCChromeScreenSharingExtension"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("CollabRTCChromeScreenSharingExtension").focusTabAndWindow()}function b(a){return c("CollabRTCChromeScreenSharingExtension").getLastFocusedWindow(a)}function d(){return c("CollabRTCChromeScreenSharingExtension").getTabForSender()}function e(){return c("CollabRTCChromeScreenSharingExtension").getTabAndWindowForSender()}function f(a,b){return c("CollabRTCChromeScreenSharingExtension").getWindow(a,b)}function h(a,b){return c("CollabRTCChromeScreenSharingExtension").install(b).then(function(){return c("CollabRTCChromeScreenSharingExtension").getSourceID(a)})}function i(){return c("CollabRTCChromeScreenSharingExtension").stop()}function j(a,b){return c("CollabRTCChromeScreenSharingExtension").updateTab(a,b)}function k(a,b){return c("CollabRTCChromeScreenSharingExtension").updateWindow(a,b)}function l(a){return c("CollabRTCChromeScreenSharingExtension").createWindow(a)}g.focusTabAndWindow=a;g.getLastFocusedWindow=b;g.getTabForSender=d;g.getTabAndWindowForSender=e;g.getWindow=f;g.getSourceID=h;g.stop=i;g.updateTab=j;g.updateWindow=k;g.createWindow=l}),98);
__d("FBRTCSupport",["UserAgent","gkx","qex"],(function(a,b,c,d,e,f,g){function h(){return c("UserAgent").isBrowser("Chrome >= 28")||c("UserAgent").isBrowser("Firefox >= 25")||c("UserAgent").isBrowser("Edge >= 15.15042")&&c("gkx")("1341692")&&!c("gkx")("1680228")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 74.1")||c("UserAgent").isBrowser("Opera >= 20")||j()&&c("gkx")("875718")||c("UserAgent").isBrowser("Oculus Browser >= 6")&&c("gkx")("1188589")||i()}function a(){return c("UserAgent").isBrowser("Chrome >= 28")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 74.1")||c("UserAgent").isBrowser("Opera >= 20")||j()&&c("gkx")("875718")||i()}function i(){return c("qex")._("1265876")||!1}function b(){return h()&&(!!c("gkx")("1738376")||c("UserAgent").isBrowser("Chrome >= "+65))}function d(a){var b=c("UserAgent").isBrowser("Chrome >= 73")||c("UserAgent").isBrowser("Safari >= 12.2");if(a)return b;a=c("gkx")("919244")&&b;return a||c("UserAgent").isBrowser("Mobile Safari >= 12.1.1")}function j(){return c("UserAgent").isBrowser("Safari >= 12.1")||c("UserAgent").isBrowser("Mobile Safari >= 12.1")}function k(){return c("UserAgent").isPlatform("Android")||c("UserAgent").isPlatform("iOS")}function e(){return!k()&&(c("UserAgent").isBrowser("Chrome >= 51")||c("UserAgent").isBrowser("Opera >= 36"))}function f(){return c("UserAgent").isBrowser("Firefox < 60")||c("UserAgent").isBrowser("Edge")}function l(){return c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 74.1")}g.isWebrtcSupported=h;g.isGroupCallWebtrcSupported=a;g.isUnifiedEnabledForCallsExperimentation=i;g.isCollabSupported=b;g.canUseUnifiedPlan=d;g.isSupportedSafariVersion=j;g.isMobileDevice=k;g.isVideoFilterEffectSupported=e;g.videoEscalationByUnmuteWorkaround=f;g.isChromiumBased=l}),98);
__d("ZenonVideoConstraintUtils",["RTCZenonExperimentPhonesNeedAlignment","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=a(1280,720,15),i=a(640,360,15);function j(){var a=c("RTCZenonExperimentPhonesNeedAlignment").phoneNeedsAlignment;return a?64:0}function k(a,b){if(b>0&&a>0){var c=Math.max(1,a/b);return b*Math.round(c)}return a}function a(a,b,c){if(a==null||b==null||c==null)return null;var d=j();a=k(a,d);b=k(b,d);d=a/b;return{aspectRatio:{ideal:d},frameRate:{ideal:c},height:{ideal:b},width:{ideal:a}}}function b(){return i}function d(){return c("gkx")("1808893")?h:null}function e(){return c("gkx")("1808893")?h:i}function f(){return i}g.CONSTRAINT_720P=h;g.CONSTRAINT_360P=i;g.alignTo=k;g.createConstraints=a;g.getP2PVideoConstraints=b;g.getMWVideoConstraints=d;g.getMWVideoConstraintsRooms=e;g.getMWebVideoConstraints=f}),98);
__d("RTCUserMediaConstraints",["FBRTCConstants","FBRTCSupport","RTCConfig","ZenonVideoConstraintUtils"],(function(a,b,c,d,e,f,g){"use strict";var h={width:d("FBRTCConstants").RTCConstraints.FHD_WIDTH,height:d("FBRTCConstants").RTCConstraints.FHD_HEIGHT,frameRate:d("FBRTCConstants").RTCConstraints.FRAME_RATE},i={width:d("FBRTCConstants").RTCConstraints.HD_WIDTH,height:d("FBRTCConstants").RTCConstraints.HD_HEIGHT,frameRate:d("FBRTCConstants").RTCConstraints.FRAME_RATE},j={width:d("FBRTCConstants").RTCConstraints.SD_WIDTH,height:d("FBRTCConstants").RTCConstraints.SD_HEIGHT,frameRate:d("FBRTCConstants").RTCConstraints.FRAME_RATE},k={width:d("FBRTCConstants").RTCConstraints.LQ_WIDTH,height:d("FBRTCConstants").RTCConstraints.LQ_HEIGHT,frameRate:d("FBRTCConstants").RTCConstraints.LQ_FRAME_RATE};function a(a){return a?{deviceId:{exact:a}}:!0}function b(a,b,c){c===void 0&&(c=d("RTCConfig").CollaborationCallQuality.videoToRoom);b=b?{deviceId:{exact:b}}:null;if(a===d("FBRTCConstants").VideoQuality.CUSTOM_VIDEO)return babelHelpers["extends"]({},c,b);if(d("FBRTCSupport").isMobileDevice())return m(d("ZenonVideoConstraintUtils").getP2PVideoConstraints());c=o(a);a=n(a)?k:q(c);return babelHelpers["extends"]({width:p(c,"width",a),height:p(c,"height",a),frameRate:p(c,"frameRate",{frameRate:10})},b)}function c(a,b){a=a.video;a=l(a);if(typeof a!=="object")return{audio:!1,video:Boolean(a)};var c=a.mandatory;a=a.optional;a=a===void 0?[]:a;return{audio:!1,video:{mandatory:babelHelpers["extends"]({},c,{chromeMediaSource:"desktop",chromeMediaSourceId:b}),optional:[{googTemporalLayeredScreencast:!0}].concat(a)}}}function l(a,b){if(!a||typeof a!=="object")return Boolean(a);if(!t(a))return a;b=b?b.optionalConstraintsOnly:!1;var c=a.mandatory;c=c===void 0?{}:c;var d=a.optional;d=d===void 0?[]:d;var e=Object.entries(a);for(var f=0;f<e.length;f++){var g=e[f],h=g[0];g=g[1];if(h==="require"||h==="advanced"||h==="mediaSource")continue;g=g&&typeof g==="object"?g:{ideal:g};Number.isFinite(g.exact)&&(g.min=g.exact,g.max=g.exact);var i=g.exact,j=g.ideal;if(j!==void 0)if(Number.isFinite(j)){var k;d.push((k={},k[s(h,"min")]=j,k),(k={},k[s(h,"max")]=j,k))}else{d.push((k={},k[s(h)]=j,k))}if(!b)if(i!==void 0&&!Number.isFinite(i))c[s(h)]=i;else{j=["min","max"];for(var k=0;k<j.length;k++){i=j[k];Number.isFinite(g[i])&&(c[s(h,i)]=g[i])}}}a.advanced&&d.push.apply(d,a.advanced);i={};Object.keys(c).length>0?i.mandatory=c:b&&(i.mandatory={});d.length>0&&(i.optional=d);return i}function m(a){if(a===null)return{};var b={};b.width=a==null?void 0:a.width;b.height=a==null?void 0:a.height;b.aspectRatio=a==null?void 0:a.aspectRatio;b.frameRate=a==null?void 0:a.frameRate;b.facingMode={ideal:"user"};return b}function n(a){return a===d("FBRTCConstants").VideoQuality.HD_IDEAL_LQ_REQUIRED_VIDEO||a===d("FBRTCConstants").VideoQuality.FHD_IDEAL_LQ_REQUIRED_VIDEO}function o(a){switch(a){case d("FBRTCConstants").VideoQuality.FHD_VIDEO:case d("FBRTCConstants").VideoQuality.FHD_IDEAL_LQ_REQUIRED_VIDEO:return h;case d("FBRTCConstants").VideoQuality.HD_VIDEO:case d("FBRTCConstants").VideoQuality.HD_IDEAL_LQ_REQUIRED_VIDEO:return i;case d("FBRTCConstants").VideoQuality.LQ_VIDEO:return k;case d("FBRTCConstants").VideoQuality.SD_VIDEO:return j;default:return i}}function p(a,b,c){c===void 0&&(c=q(a));var d=a[b];return{min:Math.min(c[b],d),max:Math.max(r(a)[b],d),ideal:d}}function q(a){switch(a){case h:return i;case i:return j;case j:case k:default:return k}}function r(a){switch(a){case k:return j;case j:return i;case i:case h:default:return h}}function s(b,a){return a?""+a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b}function t(a){return Object.keys(a).some(function(a){return a!=="mandatory"&&a!=="optional"})}g.audio=a;g.video=b;g.chromeMediaSource=c;g.chromify=l}),98);
__d("RTCScreenSharing",["CollabRTCChromeScreenSharing","Promise","RTCUserMediaConstraints","RTCUtils","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f,g){"use strict";var h="SCREEN_SHARING_NOT_SUPPORTED",i="UNEXPECTED_ERROR";function a(a,e,f){if(c("UserAgent").isBrowser("Chrome")){var g;d("WorkplaceChatHelper").isDesktopChatApp()?g=d("WorkplaceChatHelper").getScreenSharingSourceID():g=d("CollabRTCChromeScreenSharing").getSourceID(f,e);return g.then(function(b){return d("RTCUtils").getUserMedia(d("RTCUserMediaConstraints").chromeMediaSource(a,b))}).then(function(a){for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return window.setTimeout(function(){a.active||j()})})}return a})}else if(d("RTCUtils").isVCScreenSharingSupported()&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia==="function")return b("Promise").resolve(navigator.mediaDevices.getUserMedia(a)["catch"](function(a){if(a.name==="NotAllowedError")throw new Error(h)}));return b("Promise").reject(new Error(h))}function j(){return c("UserAgent").isBrowser("Chrome")?d("WorkplaceChatHelper").isDesktopChatApp()?d("WorkplaceChatHelper").stopScreenSharing():d("CollabRTCChromeScreenSharing").stop():b("Promise").reject(new Error(i))}g.SCREEN_SHARING_NOT_SUPPORTED=h;g.getUserMedia=a;g.stop=j}),98);
__d("FBRTCConfig",["CurrentUser"],(function(a,b,c,d,e,f,g){var h=!1,i=null,j=null,k=0,l=null,m="https://www.facebook.com/help/211644178877843",n="https://www.facebook.com/help/work/919532078125908",o="https://www.facebook.com/help/232232800134371",p="https://www.facebook.com/help/work/180714775754632";function a(a){var b=a.isVCEndpointCall,c=a.meetingID,d=a.meetingPassword,e=a.peerID;a=a.serverConfig;h=b;i=c;j=d;k=e;l=a}function b(){return h}function d(){return i}function e(){return j}function f(){return k}function q(){return{bad_score_count:3,frr_weight:800,plr_weight:500,rtt_weight:2,score_threshold:1e3}}function r(){var a;return((a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.unsupported_browser)!=null?a:c("CurrentUser").isWorkUser())?n:m}function s(){var a;return((a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.user_media_error)!=null?a:c("CurrentUser").isWorkUser())?p:o}function t(){var a;return((a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.user_media_permission_error)!=null?a:c("CurrentUser").isWorkUser())?p:o}function u(){var a;return((a=l)==null?void 0:a.is_messenger_dot_com)===!0}function v(){var a;return((a=l)==null?void 0:a.messenger_call_ui)===!0}function w(){var a;return((a=l)==null?void 0:a.use_hd_video_quality)===!0}function x(){var a;return((a=l)==null?void 0:a.data_channel)===!0}function y(){var a;return((a=l)==null?void 0:a.disable_url_manager)===!0}g.setConfig=a;g.isVCEndpointCall=b;g.getMeetingID=d;g.getMeetingPassword=e;g.getPeerID=f;g.statsInterpreterConfig=q;g.unsupportedBrowserUrl=r;g.userMediaErrorUrl=s;g.userMediaPermissionErrorUrl=t;g.isMessengerDotCom=u;g.useMessengerCallUI=v;g.shouldUseHDVideoQuality=w;g.shouldCreateDataChannel=x;g.disableURLManager=y}),98);
__d("assignMediaStream",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=window.URL||window.webkitURL,i="srcObject"in window.HTMLMediaElement.prototype,j="mozSrcObject"in window.HTMLMediaElement.prototype;function a(a,b){if(i)try{l(a),a.srcObject=b}catch(a){c("FBLogger")("rt_web").catching(a).warn("Failed to assign media stream. Stream object is: "+String(b));throw a}else j?a.mozSrcObject=b:k(a,b)}function k(a,b){l(a),a.src=b!=null?h.createObjectURL(b):""}function l(a){try{typeof a.src==="string"&&h.revokeObjectURL(a.src)}catch(a){c("FBLogger")("rt_web").catching(a).warn("error revoking object URL")}}g["default"]=a}),98);
__d("FBRTCUtils",["AsyncRequest","FBIDCheck","FBRTCConfig","RTWebUserActionLogger","assignMediaStream","emptyFunction"],(function(a,b,c,d,e,f,g){var h=6e3,i="setSinkId"in window.HTMLMediaElement.prototype;function a(a,b){if(a==null)return;c("assignMediaStream")(a,b);if(b){b=a.play();b!==void 0&&b["catch"](function(a){c("RTWebUserActionLogger").logError({errorDomain:"autoplay was prevented",errorType:a.toString()})})}}function b(a,b){return a-b<.01&&b-a<.01}function e(a,b,d,e,f,g){b===void 0&&(b=c("emptyFunction"));d===void 0&&(d=c("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=h);g===void 0&&(g={});a=new(c("AsyncRequest"))().setURI(a).setData(g).setAllowCrossPageTransition(!0).setHandler(b).setErrorHandler(d).setTimeoutHandler(f,function(){d()});e&&a.setOption("asynchronous_DEPRECATED",!1);a.send()}function f(){return i}function j(a){var b=d("FBRTCConfig").isVCEndpointCall();return b!==void 0?b:!!a&&!d("FBIDCheck").isUser_deprecated(a)}function k(a){return a==="quickdial"||a==="meeting_room_page_profile"}g.attachMediaStream=a;g.aboutEqual=b;g.sendServerRequest=e;g.supportsSetSink=f;g.isPeerVCEndpoint=j;g.isCollabTrigger=k}),98);
__d("MediaStream",[],(function(a,b,c,d,e,f){"use strict";a=window.MediaStream||window.webkitMediaStream;f["default"]=a}),66);
__d("RTCAudioTrackNoiseDetector",["invariant","MediaStream","Promise"],(function(a,b,c,d,e,f,g,h){"use strict";var i="audio track with absolute silence",j="audio track data timeout",k='wrong track type, expected "audio"',l=100;function a(a,d){if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(k));var e=new(c("MediaStream"))();e.addTrack(a);var f=new AudioContext(),g=f.createMediaStreamSource(e),m=f.createScriptProcessor(0,1,1),n=l,o=function(){m!=null||h(0,2865);m.onaudioprocess=null;m.disconnect();m=null;g!=null||h(0,2866);g.disconnect();g=null;e!=null||h(0,2867);e.removeTrack(a);e=null;f!=null||h(0,2868);return b("Promise").resolve(f.close())["catch"](function(){return b("Promise").resolve()}).then(function(){f=null})};return b("Promise").race([new(b("Promise"))(function(a,b){m!=null||h(0,2865),m.onaudioprocess=function(c){c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}n>0?n--:b(new Error(i))},g!=null||h(0,2866),g.connect(m),f!=null||h(0,2868),m.connect(f.destination)}),new(b("Promise"))(function(a){return window.setTimeout(a,d)}).then(function(){throw new Error(j)})]).then(function(){return o()})["catch"](function(a){return o().then(function(){throw a})})}g.ABSOLUTE_SILENCE_ERROR=i;g.DATA_TIMEOUT_ERROR=j;g.WRONG_TRACK_TYPE_ERROR=k;g.detect=a}),98);
__d("FBRTCDismissReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,CALL_ENDED_BY_PRODUCT:9,JOIN_APPROVAL_DENIED:10,JOIN_APPROVAL_TIMEDOUT:11,UNSUPPORTED_VERSION:12,LIVE_NOT_ACKED:13,TX_ACK_TIMEDOUT:14})}),null);
__d("FBRTCHangupReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6,E2EE_MANDATED_BUT_OFFER_DID_NOT_CONTAIN_E2EE:7,E2EE_MANDATED_BUT_ANSWER_DID_NOT_CONTAIN_E2EE:8,WEBRTC_ERROR:9})}),null);
__d("RTWebStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("\u0110ang b\u1eadn");b=h._("G\u1ecdi l\u1ea1i");c=h._("Cu\u1ed9c g\u1ecdi \u0111\u00e3 k\u1ebft th\u00fac");d=h._("Kh\u00f4ng g\u1ecdi \u0111\u01b0\u1ee3c");e=h._("Cu\u1ed9c g\u1ecdi b\u1ecb gi\u00e1n \u0111o\u1ea1n");f=h._("Kh\u00f4ng th\u1ec3 k\u1ebft n\u1ed1i cu\u1ed9c g\u1ecdi");var i=h._("B\u1ea1n \u0111\u00e3 r\u1eddi kh\u1ecfi \u0111o\u1ea1n chat video nh\u00f3m"),j=h._("Ph\u00f2ng h\u1ecdp m\u1eb7t n\u00e0y \u0111\u00e3 c\u00f3 s\u1ed1 ng\u01b0\u1eddi tham gia t\u1ed1i \u0111a. Khi ai \u0111\u00f3 r\u1eddi kh\u1ecfi, b\u1ea1n c\u00f3 th\u1ec3 tham gia l\u1ea1i."),k=h._("L\u1ed7i m\u00e3 h\u00f3a m\u00e1y kh\u00e1ch"),l=h._("\u0110\u00f3ng"),m=h._("\u0110\u00e3 k\u1ebft n\u1ed1i"),n=h._("\u0110ang k\u1ebft n\u1ed1i..."),o=h._("M\u1ea5t k\u1ebft n\u1ed1i"),p=h._("M\u1ea5t k\u1ebft n\u1ed1i"),q=h._("\u0110ang li\u00ean h\u1ec7..."),r=h._("\u0110\u00e3 sao ch\u00e9p"),s=h._("Sao ch\u00e9p li\u00ean k\u1ebft"),t=h._("\u0110\u00e3 ng\u1eaft k\u1ebft n\u1ed1i"),u=h._("B\u1ecf qua"),v=h._("\u0110ang g\u00e1c m\u00e1y..."),w=h._("Cu\u1ed9c g\u1ecdi kh\u00f4ng ho\u1ea1t \u0111\u1ed9ng"),x=h._("\u0110ang c\u00f3 cu\u1ed9c g\u1ecdi kh\u00e1c"),y=h._("L\u1ea7n chat video \u0111\u1ebfn"),z=h._("Qu\u00e1 nhi\u1ec1u kh\u00e1ch \u0111\u01b0\u1ee3c k\u1ebft n\u1ed1i v\u1edbi ph\u00f2ng"),A=h._("Kh\u00f4ng tr\u1ea3 l\u1eddi"),B=h._("L\u00fac kh\u00e1c"),C=h._("\u0110\u00e3 \u0111\u1ea1t gi\u1edbi h\u1ea1n ng\u01b0\u1eddi tham gia"),D=h._("Vui l\u00f2ng \u0111\u1ee3i..."),E=h._("\u1ea2nh \u0111\u1ea1i di\u1ec7n"),F=h._("\u0110ang k\u1ebft n\u1ed1i l\u1ea1i..."),G=h._("G\u1ecdi l\u1ea1i"),H=h._("\u0110ang \u0111\u1ed5 chu\u00f4ng..."),I=h._("Chuy\u1ec3n sang Wi-Fi \u0111\u1ec3 ho\u00e0n th\u00e0nh cu\u1ed9c g\u1ecdi c\u1ee7a b\u1ea1n"),J=h._("Kh\u00f4ng li\u00ean h\u1ec7 \u0111\u01b0\u1ee3c"),K=function(a){return h._("M\u00e1y \u1ea3nh c\u1ee7a {name} \u0111ang t\u1eaft",[h._param("name",a)])},L=h._("M\u00e1y \u1ea3nh \u0111ang t\u1eaft"),M=h._("\u0110ang ch\u1edd ng\u01b0\u1eddi kh\u00e1c tham gia...");g.busy=a;g.callAgain=b;g.callEnded=c;g.callFailed=d;g.callInterrupted=e;g.cannotConnect=f;g.chatLinksLeftVideoChat=i;g.chatLinkMaxParticipantsExceeded=j;g.clientEncryptionError=k;g.close=l;g.connected=m;g.connecting=n;g.connectionDropped=o;g.connectionLost=p;g.contacting=q;g.copiedVideoChatLink=r;g.copyVideoChatLink=s;g.disconnected=t;g.dismiss=u;g.hangingUp=v;g.inactive=w;g.inAnotherCall=x;g.incomingVideoChat=y;g.invalidStreamConfiguration=z;g.noAnswer=A;g.notNow=B;g.participantLimitReached=C;g.pleaseWait=D;g.profilePictureAlt=E;g.reconnecting=F;g.redial=G;g.ringing=H;g.switchToWiFi=I;g.unreachable=J;g.userVideoOff=K;g.viewerVideoOff=L;g.waitingForOthers=M}),98);
__d("RTCEndCallReason",["FBRTCConstants","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode","RTWebStrings"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3="local",typeof a==="string"||a instanceof String?this.$1=d("FBRTCConstants").endCallReasonFromString(a):this.$1=a}var b=a.prototype;b.setSubreason=function(a){this.$2=a;return this};b.getSubreason=function(){return this.$2};b.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};b.getRemoteEnded=function(){return this.$3==="remote"};b.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};b.$4=function(){return d("FBRTCConstants").callEndReasonString(this.$1)};b.getReasonID=function(){return this.$1};b.toString=function(a){var b;a===void 0&&(a=!1);b=((b=this.$5(a))!=null?b:"").toString();return a?b+" "+this.$6():b};b.$5=function(a){switch(this.$1){case d("FBRTCConstants").CallEndReason.NO_ANSWER_TIMEOUT:case d("FBRTCConstants").CallEndReason.IGNORE_CALL:return d("RTWebStrings").noAnswer;case d("FBRTCConstants").CallEndReason.OTHER_NOT_CAPABLE:if(this.$2===d("FBRTCConstants").CollabCallEndSubreason.MCU_INVALID_STREAM_CONFIGURATION)return d("RTWebStrings").invalidStreamConfiguration;case d("FBRTCConstants").CallEndReason.INCOMING_TIMEOUT:case d("FBRTCConstants").CallEndReason.NO_PERMISSION:case d("FBRTCConstants").CallEndReason.OTHER_CARRIER_BLOCKED:return d("RTWebStrings").unreachable;case d("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED:case d("FBRTCConstants").CallEndReason.WEBRTC_ERROR:case d("FBRTCConstants").CallEndReason.NO_UI_ERROR:case d("FBRTCConstants").CallEndReason.CALLER_NOT_VISIBLE:case d("FBRTCConstants").CallEndReason.CLIENT_ERROR:return d("RTWebStrings").callFailed;case d("FBRTCConstants").CallEndReason.UNSUPPORTED_VERSION:return d("RTWebStrings").cannotConnect;case d("FBRTCConstants").CallEndReason.IN_ANOTHER_CALL:return d("RTWebStrings").inAnotherCall;case d("FBRTCConstants").CallEndReason.CARRIER_BLOCKED:return d("RTWebStrings").switchToWiFi;case d("FBRTCConstants").CallEndReason.CLIENT_INTERRUPTED:return d("RTWebStrings").callInterrupted;case d("FBRTCConstants").CallEndReason.HANGUP_CALL:case d("FBRTCConstants").CallEndReason.ACCEPT_AFTER_HANGUP:return a?"":d("RTWebStrings").callEnded;case d("FBRTCConstants").CallEndReason.CONNECTION_DROPPED:return d("RTWebStrings").connectionLost;case d("FBRTCConstants").CallEndReason.OTHER_INSTANCE_HANDLED:return null;case d("FBRTCConstants").CallEndReason.CLIENT_ENCRYPTION_ERROR:return d("RTWebStrings").clientEncryptionError;case d("FBRTCConstants").CallEndReason.INACTIVE_TIMEOUT:return d("RTWebStrings").inactive;default:return null}};b.$6=function(){var a;if(this.$1!==d("FBRTCConstants").CallEndReason.OTHER_NOT_CAPABLE&&this.$1!==d("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED&&this.$1!==d("FBRTCConstants").CallEndReason.HANGUP_CALL&&this.$1!==d("FBRTCConstants").CallEndReason.ACCEPT_AFTER_HANGUP)return"";switch(this.$2){case d("FBRTCConstants").CollabCallEndSubreason.REMOTE_PEER_HANGUP:return"Call ended";case d("FBRTCConstants").CollabCallEndSubreason.REMOTE_PEER_REJECT:return"Call declined";case d("FBRTCConstants").CollabCallEndSubreason.CLOSED_BY_MCU:return"Call expired";case d("FBRTCConstants").CollabCallEndSubreason.CLOSED_AS_STALE:return"Server failed, call is stale";case d("FBRTCConstants").CollabCallEndSubreason.CALL_INITIALIZATION_FAILED:return"Call initialization to room failed";case d("FBRTCConstants").CollabCallEndSubreason.SIP_CONNECTION_INITIALIZATION_FAILED:return"No Answer";case d("FBRTCConstants").CollabCallEndSubreason.LOST_MCU_CONNECTION:return"MCU Media connection failed";case d("FBRTCConstants").CollabCallEndSubreason.LOST_MCU_THRIFT_CONNECTION:return"MCU infrastructure dropped connection";case d("FBRTCConstants").CollabCallEndSubreason.LOST_SIP_ADAPTER_CONNECTION:return"SIP infrastructure dropped connection";case d("FBRTCConstants").CollabCallEndSubreason.MCU_NO_AUDIO_STREAM:return"Invalid audio stream";case d("FBRTCConstants").CollabCallEndSubreason.MCU_INVALID_STREAM_CONFIGURATION:return"Invalid stream configuration";case d("FBRTCConstants").CollabCallEndSubreason.INVALID_MEETING_ID:return"Invalid meeting ID";case d("FBRTCConstants").CollabCallEndSubreason.UNKNOWN:default:a=(a=this.$2)!=null?a:"Unknown";return this.$2!=null&&this.$2!==""?"Unexpected call failure: "+a:"Call ended"}};a.fromHangupReason=function(b){switch(b){case c("FBRTCHangupReason").IGNORE_CALL:return new a(d("FBRTCConstants").CallEndReason.IGNORE_CALL);case c("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new a(d("FBRTCConstants").CallEndReason.NO_ANSWER_TIMEOUT);case c("FBRTCHangupReason").HANGUP_CALL:return new a(d("FBRTCConstants").CallEndReason.HANGUP_CALL);case c("FBRTCHangupReason").CLIENT_ERROR:return new a(d("FBRTCConstants").CallEndReason.CLIENT_ERROR);case c("FBRTCHangupReason").IN_ANOTHER_CALL:return new a(d("FBRTCConstants").CallEndReason.IN_ANOTHER_CALL);case c("FBRTCHangupReason").CLIENT_INTERRUPTED:return new a(d("FBRTCConstants").CallEndReason.CLIENT_INTERRUPTED);default:return new a(d("FBRTCConstants").CallEndReason.HANGUP_CALL)}};a.subreasonFromDismissRequest=function(a){if(!a)return null;switch(a.reason){case c("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return"REMOVED_BY_PARTICIPANT";default:return null}};a.fromDismissRequest=function(b){if(!b)return new a(d("FBRTCConstants").CallEndReason.HANGUP_CALL);switch(b.reason){case c("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case c("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new a(d("FBRTCConstants").CallEndReason.OTHER_INSTANCE_HANDLED);case c("FBRTCDismissReason").CALL_ENDED:return new a(d("FBRTCConstants").CallEndReason.HANGUP_CALL);case c("FBRTCDismissReason").IN_ANOTHER_CALL:return new a(d("FBRTCConstants").CallEndReason.IN_ANOTHER_CALL);case c("FBRTCDismissReason").CONNECTION_DROPPED:return new a(d("FBRTCConstants").CallEndReason.CONNECTION_DROPPED);case c("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new a(d("FBRTCConstants").CallEndReason.HANGUP_CALL);case c("FBRTCDismissReason").REJECTED_BY_CALLEE:return new a(d("FBRTCConstants").CallEndReason.IGNORE_CALL);case c("FBRTCDismissReason").INTERNAL_ERROR:return new a(d("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED);default:return new a(d("FBRTCConstants").CallEndReason.HANGUP_CALL)}};a.fromResponseStatusCode=function(b){switch(b){case c("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case c("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new a(d("FBRTCConstants").CallEndReason.NO_PERMISSION);case c("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new a(d("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED);case c("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case c("FBRTCRtcResponseStatusCode").BAD_REQUEST:case c("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case c("FBRTCRtcResponseStatusCode").NOT_FOUND:return new a(d("FBRTCConstants").CallEndReason.CLIENT_ERROR);default:return new a(d("FBRTCConstants").CallEndReason.HANGUP_CALL)}};return a}();g["default"]=a}),98);
__d("ZenonRTCOnDeviceChangePoller",["Promise","RTCMediaDevices","ZenonDebugLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.isNeeded=function(){var a=navigator;a=a.mediaDevices;return!d("RTCMediaDevices").isSupported("enumerateDevices")||a&&"ondevicechange"in a?!1:!0};function a(a){var c=this;this.$1=[];this.$2="";this.$4=null;this.$7=function(){d("RTCMediaDevices").enumerateDevices().then(function(a){a=a.map(function(a){return a.deviceId+":"+a.label+":"+a.groupId}).sort().join("~");if(a===c.$2)return;c.$2=a;for(var a=c.$1,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e()}catch(a){}}})["catch"](function(a){return b("Promise").resolve()}).then(function(){c.$4=window.setTimeout(c.$7,c.$3)})["catch"](function(a){})};this.$3=a}var c=a.prototype;c.add=function(a){this.$1.push(a),this.$5()};c.remove=function(a){this.$1=this.$1.filter(function(b){return b!==a}),this.$6()};c.$5=function(){if(this.$4!==null)return;this.$4=window.setTimeout(this.$7,0)};c.$6=function(){if(this.$1.length>0)return;this.$4!==null&&(window.clearTimeout(this.$4),this.$4=null)};return a}();g["default"]=a}),98);
__d("RTCMediaDevices",["invariant","Promise","ZenonRTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function")!=null?i:!1,k=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",l=1e3,m;function a(a,b){if(a==="devicechange"&&c("ZenonRTCOnDeviceChangePoller").isNeeded()){m||(m=new(c("ZenonRTCOnDeviceChangePoller"))(l));m.add(b);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,b)}function d(a,b){if(a==="devicechange"&&c("ZenonRTCOnDeviceChangePoller").isNeeded()){m&&m.remove(b);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,b)}function e(a){switch(a){case"enumerateDevices":return j||k;default:return Boolean(navigator.mediaDevices)}}function f(){if(j){navigator.mediaDevices||h(0,4492);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(k)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(o);return b("Promise").reject(new Error("enumerateDevices() not supported"))}function n(a,b){return a.filter(function(a){return a.kind===b})}function o(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}g.addEventListener=a;g.removeEventListener=d;g.isSupported=e;g.enumerateDevices=f;g.filterDevicesOfKind=n}),98);
__d("RTCVideoTrackActivityDetector",["invariant","MediaStream","Promise","assignMediaStream"],(function(a,b,c,d,e,f,g,h){"use strict";var i="video track playback timeout",j="unexpected video track ready state",k='wrong track type, expected "video"';function a(a,d){if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(k));var e=document.createElement("video");e.muted=!0;var f=new(c("MediaStream"))();f.addTrack(a);var g,l=null,m=function(){window.clearInterval(l),e&&(e.pause(),c("assignMediaStream")(e,null),e.removeEventListener("timeupdate",g),e=null),f&&(f.removeTrack(a),f=null)};return b("Promise").race([new(b("Promise"))(function(d,i){e!=null||h(0,5995),c("assignMediaStream")(e,f),g=function(b){e!=null||h(0,5995),e.currentTime>0&&(a.readyState==="live"?(d(),m()):i(new Error(j)))},b("Promise").resolve(e.pause()).then(function(){e!=null||h(0,5995);return e.play()}).then(function(){g(),e!=null||h(0,5995),e.addEventListener("timeupdate",g),l=window.setInterval(g,50)})["catch"](function(a){return i(a)})}),new(b("Promise"))(function(a){return window.setTimeout(a,d)}).then(function(){throw new Error(i)})])["catch"](function(a){m();throw a})}g.PLAYBACK_TIMEOUT_ERROR=i;g.WRONG_READY_STATE_ERROR=j;g.WRONG_TRACK_TYPE_ERROR=k;g.detect=a}),98);
__d("RTCMediaStreamValidator",["Promise","RTCAudioTrackNoiseDetector","RTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f,g){"use strict";var h="no audio tracks",i="no video tracks",j="too many audio tracks",k="too many video tracks",l="unexpected audio track(s)",m="unexpected video track(s)";function a(a,c,d,e){d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([n(a,c,f,g),o(a,c,d,e)]).then(function(){return a})}function n(a,c,e,f){var g=a.getAudioTracks();if(!c.audio)return g.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(g.length<1)return b("Promise").reject(new Error(h));else if(g.length>1)return b("Promise").reject(new Error(j));return e?d("RTCAudioTrackNoiseDetector").detect(g[0],f).then(function(){return a}):b("Promise").resolve(a)}function o(a,c,e,f){var g=a.getVideoTracks();if(!c.video)return g.length>0?b("Promise").reject(new Error(m)):b("Promise").resolve(a);if(g.length<1)return b("Promise").reject(new Error(i));else if(g.length>1)return b("Promise").reject(new Error(k));return e?d("RTCVideoTrackActivityDetector").detect(g[0],f).then(function(){return a}):b("Promise").resolve(a)}g.NO_AUDIO_TRACKS_ERROR=h;g.NO_VIDEO_TRACKS_ERROR=i;g.TOO_MANY_AUDIO_TRACKS_ERROR=j;g.TOO_MANY_VIDEO_TRACKS_ERROR=k;g.UNEXPECTED_AUDIO_TRACKS_ERROR=l;g.UNEXPECTED_VIDEO_TRACKS_ERROR=m;g.validate=a}),98);
__d("FBRTCParticipantCallState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12,PENDING_APPROVAL:13,APPROVED:14,FAILED_APPROVAL:15,HANGUP_IN_WAITING_ROOM:16,UNCALLABLE:17})}),null);
__d("RTCUser",["FBRTCParticipantCallState","RTCUserRecord","ScotchConstants","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.clone=function(){return new b(this.toObject())};e.setParticipantState=function(a){return(!this.participantState||this.participantState.state!==c("FBRTCParticipantCallState").CONNECTED)&&a.state===c("FBRTCParticipantCallState").CONNECTED?this.set("participantState",a).set("lastConnectedAt",Date.now()):!this.participantState||this.participantState.state!==a.state?this.set("participantState",a):this};e.getParticipantState=function(){return this.participantState&&this.participantState.state};e.hasAudio=function(){return this.getAllStreamAudioTracks().some(function(a){return a.length>0})};e.hasVideo=function(){return this.streams.some(function(a){return a.getVideoTracks().length>0})};e.hasLiveVideoTracks=function(){return this.streams.some(function(a){return a.getVideoTracks().some(function(a){return a.readyState==="live"})})};e.isAudioDisabled=function(){var a=this;return!this.hasAudio()?!0:this.getAllStreamAudioTracks().every(function(b){return a.areAllTracksDisabled(b)})};e.isVideoDisabled=function(){var a=this;return!this.hasVideo()?!0:this.streams.every(function(b){return a.areAllTracksDisabled(b.getVideoTracks())})};e.areAllTracksDisabled=function(a){return!a.some(function(a){return a.enabled})};e.hasFunctioningVideoTrack=function(){return!this.hasVideo()?!1:this.streams.every(function(a){return a.getVideoTracks().some(function(a){return a.enabled&&!a.muted})})};e.toggleAudioTrackMutedByUser=function(a,b){a=this.audioStreamMuteStates.set(a,b);return this.set("audioStreamMuteStates",a)};e.toggleDisableAudio=function(a){var b=this;this.getAllStreamAudioTracks().forEach(function(c){return b.$RTCUser1(c,a)});return this.clone()};e.toggleDisableVideo=function(a){var b=this;this.streams.forEach(function(c){b.$RTCUser1(c.getVideoTracks(),a)});return this.clone()};e.stopVideo=function(){var a=this;this.streams.forEach(function(b){b.getVideoTracks().forEach(function(c){a.$RTCUser1(b.getVideoTracks(),!0),c.readyState!=="ended"&&(c.onended&&c.onended(),c.stop())})});return this.clone()};e.getAllStreamAudioTracks=function(){return this.streams.concat(this.screenStreams).map(function(a){return a.getAudioTracks()})};e.hasStream=function(){return!this.streams.isEmpty()};e.addStream=function(a){return this.set("streams",this.streams.add(c("nullthrows")(a)))};e.removeStream=function(a){var b=this.audioStreamMuteStates["delete"](a.id);this.set("audioStreamMuteStates",b);return this.set("streams",this.streams["delete"](a))};e.getStream=function(){return this.hasStream()?this.streams.first():null};e.getActiveStream=function(){return this.hasStream()?this.streams.find(function(a){return"active"in a&&a.active}):null};e.replaceStream=function(a,b){return!this.streams.contains(a)?this:this.set("streams",this.streams["delete"](a).add(b))};e.removeAllStreams=function(){return this.set("streams",c("immutable").Set())};e.getScreenStream=function(){return this.screenStreams&&this.hasScreenStream()?this.screenStreams.first():null};e.hasScreenStream=function(){return!this.screenStreams.isEmpty()};e.addScreenStream=function(a){return this.set("screenStreams",this.screenStreams.add(a))};e.removeScreenStream=function(a){return this.set("screenStreams",this.screenStreams["delete"](a))};e.removeAllScreenStreams=function(){return this.set("screenStreams",c("immutable").Set())};e.replaceScreenStream=function(a,b){if(!this.screenStreams.contains(a))return this;return a===b?this:this.set("screenStreams",this.screenStreams.add(b)["delete"](a))};e.setRoomLocation=function(a){return this.set("roomLocation",a)};e.getRoomLocation=function(){return this.roomLocation};e.$RTCUser1=function(a,b){var c=b!=null?!b:this.areAllTracksDisabled(a);a.forEach(function(a){return a.enabled=c})};e.getMediaTypeForTracks=function(){var a=new Map(),b=this.getScreenStream();b&&b.getVideoTracks().forEach(function(b){return a.set(b.id,d("ScotchConstants").MediaContentTypes.SCREEN)});return a};e.subscribeVideo=function(){return this.set("isVideoSubscribed",!0)};e.unsubscribeVideo=function(){return this.set("isVideoSubscribed",!1)};e.setPausedDownlink=function(a){return this.set("pausedDownlink",a)};return b}(c("RTCUserRecord"));g["default"]=a}),98);
__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.gen=function(b){var d={params:{},auto_exposure:!1,in_experiment:!1};d=c("FBRTCExperimentsConfig")[b]||d;b=new a(b,d);return b};a.getIncomingCallExperiments=function(){return a.gen("rtweb_incoming_call_experiments")};a.getMediaQualityExperiments=function(){return a.gen("rtc_www_media_quality_h2_2018")};a.getUpsellMessengerDesktopUnsupportedBrowser=function(){return a.gen("upsell_messenger_desktop_unsupported_browser_universe")};function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.$3=function(){this.$2.auto_exposure&&this.logExposure()};b.logExposure=function(){this.$2.in_experiment&&d("QE2Logger").logExposureForUser(this.$1)};b.getParam=function(a,b){if(this.$2.in_experiment){this.$3();a=this.$2.params[a];if(a!==void 0)return String(a)}return b};b.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==void 0)return parseInt(this.$2.params[a],10)}return b};b.getBool=function(a,b,c){c===void 0&&(c=!0);var d=this.$2.params;if(this.$2.in_experiment){c&&this.$3();if(d[a]!==void 0)return d[a]==="1"||d[a]===1||d[a]==="true"||d[a]===!0}return b};return a}();g["default"]=a}),98);
__d("RTWebClientFeatureGating",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCSupport","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("FBRTCConfig").isVCEndpointCall()||c("CurrentUser").isWorkUser()}function b(){return c("gkx")("867914")}function e(){return!1}function f(){return c("FBRTCExperiment").gen("rtc_www_larger_self_view").getBool("draggable_self_view",!1)}function h(){return!this.isVCCallOrWorkUser()}function i(){return!c("CurrentUser").isWorkUser()&&d("FBRTCSupport").isVideoFilterEffectSupported()}function j(){if(d("FBRTCConfig").isVCEndpointCall())return!1;return c("CurrentUser").isWorkUser()&&!c("gkx")("1020560")?!1:!0}function k(){return!1}function l(){return c("FBRTCExperiment").getIncomingCallExperiments().getBool("use_new_incoming_call_dialog",!1)}function m(){return c("FBRTCExperiment").getIncomingCallExperiments().getBool("use_three_buttons",!1)}function n(){return c("FBRTCExperiment").gen("rtc_www_call_unification").getBool("in_call_background_updated",!1)}function o(){return c("gkx")("678350")}function p(){if(d("FBRTCConfig").isVCEndpointCall())return!1;var a=c("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("camera_off",!1)}function q(){var a=c("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("track_api",!1)}function r(){return!this.isVCCallOrWorkUser()}function s(){return c("gkx")("678351")}function t(){return c("gkx")("700608")}function u(){return c("gkx")("724606")}function v(){return navigator.userAgent.indexOf("Intel Mac OS X 10_14")!==-1}function w(){return c("FBRTCExperiment").gen("rt_web_fb_profile_rtc_buttons").getBool("open_chat_tab",!1)}function x(){return this.isVCCallOrWorkUser()?!1:c("FBRTCExperiment").getMediaQualityExperiments().getBool("show_network_indicator",!1)}function y(){return this.isVCCallOrWorkUser()?!1:c("FBRTCExperiment").getMediaQualityExperiments().getBool("monitor_network_quality",!1)}function z(){return!d("FBRTCConfig").isVCEndpointCall()}g.isVCCallOrWorkUser=a;g.shouldShowEndCallQPs=b;g.shouldShowCreateVCLButton=e;g.draggableSelfView=f;g.endCallSurveyDropdownOptions=h;g.canUseMWVideoFilters=i;g.isChatEnabled=j;g.isGroupChatEnabled=k;g.useNewIncomingCallDialog=l;g.answerCallWithThreeButtons=m;g.callUnification=n;g.canUseMultiwaySandbox=o;g.stopVideoWhenMute=p;g.restartVideoWithTrackAPI=q;g.shouldAlwaysShowRedial=r;g.disableOpusStereo=s;g.shouldApplySdpMidTranslation=t;g.preserveFirefoxInactiveDataChannelBlock=u;g.showMojavePermissionsWarning=v;g.alwaysOpenChatTab=w;g.shouldShowNetworkQualityIndicator=x;g.shouldMonitorNetworkQuality=y;g.preferIsacForGroupCalls=z}),98);
__d("UserMediaRequestError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,c)||this;e.constraint=d;e.nativeErrorName=b;e.message=g(c);e.name=h(b);return e}b.createFromNative=function(a){var c=a.constraint,d=a.message;a=a.name;return new b(a,d,c||"")};var c=b.prototype;c.isRecoverableError=function(){return this.name==="InvalidStateError"?!0:!1};c.getEndCallSubReason=function(){return"MediaFailed: "+this.name+", "+this.constraint};return b}(babelHelpers.wrapNativeSuper(Error));function g(a){switch(a){case"The operation is insecure.":return"The request is not allowed by the user agent or the platform in the current context.";default:return a}}function h(a){switch(a){case"ConstraintNotSatisfiedError":return"OverconstrainedError";case"NO_DEVICES_FOUND":case"DevicesNotFoundError":return"NotFoundError";case"MediaDeviceFailedDueToShutdown":case"MediaDeviceKillSwitchOn":case"TrackStartError":return"NotReadableError";case"PermissionDeniedError":case"PERMISSION_DENIED":case"PermissionDismissedError":return"NotAllowedError";default:return a}}f["default"]=a}),66);
__d("generateRTCTransactionID",["randomInt"],(function(a,b,c,d,e,f,g){"use strict";function a(){return String(c("randomInt")(0,4294967294)+1)}g["default"]=a}),98);
__d("RTCUtils",["invariant","CurrentUser","FBLogger","FBRTCConfig","FBRTCLogger","FBRTCUtils","Promise","RTCAudioTrackNoiseDetector","RTCEndCallReason","RTCMediaDevices","RTCMediaStreamValidator","RTCScreenSharing","RTCUser","RTCUserMediaConstraints","RTCVideoTrackActivityDetector","RTWebClientFeatureGating","RTWebUserActionLogger","URI","UserAgent","UserMediaRequestError","generateRTCTransactionID","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("RTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,j=b("RTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR,k={isGroupCall:function(a){return a.split(":")[0]==="GROUP"},isMessengerCall:function(a){return a.split(":")[0]==="MESSENGER"},isRoomCall:function(a){return a.split(":")[0]==="ROOM"},isPeerCall:function(a){return a.split(":")[0]==="PEER"},isAlohaCall:function(a){return a.split(":")[0]==="ALOHA"},isWatchPartyCall:function(a){return a.split(":")[0]==="WATCH"},isSupportedMWCall:function(a){return k.isGroupCall(a)||k.isMessengerCall(a)||k.isRoomCall(a)||k.isAlohaCall(a)||k.isWatchPartyCall(a)},getPeerID:function(a){if(k.isGroupCall(a))throw new Error("Not a P2P call: "+a);a=a.split(":");a=a.slice(1);return a[0]===b("CurrentUser").getID()?a[1]:a[0]},getMessengerCallID:function(a){if(!k.isMessengerCall(a))throw new Error("Not a Messenger call: "+a);return Number(a.split(":")[1])},getThreadID:function(a){return!k.isGroupCall(a)?null:Number(a.split(":")[1])},getSandboxingTierFromURIOrEmpty:function(a,b){b=b+"=";a=a.split(b);if(a[1]){b=a.pop().split("&").shift();return b}return""},maybeAppendSandboxOverrides:function(a){a.extensions==null&&(a.extensions={});if(b("RTWebClientFeatureGating").canUseMultiwaySandbox()){var c=window.location.href,d=k.getSandboxingTierFromURIOrEmpty(c,"multiway_www_tier");c=k.getSandboxingTierFromURIOrEmpty(c,"multiway_core_tier");d&&a.extensions!=null&&(a.extensions.multiwayWwwTier=d);c&&a.extensions!=null&&(a.extensions.multiwayCoreTier=c)}},createRequestHeader:function(a,c,d,e,f){a={type:a,clientStack:4,transactionId:b("generateRTCTransactionID")(),retryCount:0,conferenceName:c,clientSessionId:e?e:""};c={};d&&(a.serverInfoData=d);f&&(c.esc_p2p_call_id=f);a.extensions=c;k.maybeAppendSandboxOverrides(a);return a},createClientContextMessage:function(a,b){a={num_participants:a,trigger:b};b={header:{topic_DEPRECATED:"client_context",shouldSendToAllUsers:!1},body:{genericMessage:{topic:"client_context",data:JSON.stringify(a)}}};return b},createResponseHeader:function(a,b,c){b={type:a.type,clientStack:4,transactionId:a.transactionId,retryCount:0,conferenceName:a.conferenceName,responseStatusCode:b,clientSessionId:c?c:""};a.serverInfoData&&(b.serverInfoData=a.serverInfoData);b.extensions={};k.maybeAppendSandboxOverrides(b);return b},maybeRemoveVideoConstraint:function(a){return b("RTCMediaDevices").enumerateDevices().then(function(c){if(c.some(function(a){return a.kind==="videoinput"})){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] At least one device has videoinput.  Keeping constraints "+JSON.stringify(a)});return a}b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] No devices capable of videoinput.",errorDomain:"GetUserMedia",errorType:"Removing video stream by setting video constraint to false."});return babelHelpers["extends"]({},a,{video:!1})})["catch"](function(){return b("Promise").resolve(a)})},getUserMediaWithAudioFallback:function(a,c){return a.video?k.maybeRemoveVideoConstraint(a).then(function(a){return k.getUserMedia(a,c)})["catch"](function(c){if(a.video){if(c.name==="NotFoundError"||c.name==="StreamFailedToStart"){var d="Audio Fallback Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video stream",errorDomain:"GetUserMedia",errorType:d});return k.getUserMedia({video:!1,audio:a.audio})}if(c.name==="OverconstrainedError"){d="Video Constraints Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:d});return k.getUserMedia({video:!0,audio:a.audio})}}d="Error: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Throwing other error",errorDomain:"GetUserMedia",errorType:d});throw c}):k.getUserMedia(a,c)},getUserMediaWithFallbackToEmptyVideoConstraints:function(a,c){return k.getUserMedia(a,c)["catch"](function(c){if(a.video&&c.name==="OverconstrainedError"){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithFallbackToEmptyVideoConstraints] Fallback getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:"Original Constraints: "+JSON.stringify(a)});return k.getUserMedia(babelHelpers["extends"]({},a,{video:!0}))}throw c})},getUserScreenMedia:function(a,c,d){return b("RTCScreenSharing").getUserMedia(a,c,d)},getUserMedia:function(a,c){var d=navigator,e=d.mediaDevices;if(typeof a.video==="object"&&a.video.mediaSource){b("FBLogger")("rtc_www").mustfix("Please use %s instead of %s for screen","RTCUtils.getUserScreenMedia()","RTCUtils.getUserMedia()");return b("RTCScreenSharing").getUserMedia(a,"unknown")}d=c&&c.optionalConstraintsOnly&&a.video;var f=k._parseConstraints(a,{optionalConstraintsOnly:!!d}),g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return new(b("Promise"))(function(a,d){e&&typeof e.getUserMedia==="function"?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Newer version"}),a(e.getUserMedia(f).then(function(a){return k._maybeSupportFilteredStreams(a,!!(c&&c.supportFilteredStreams))}))):g?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Backwards compatible version"}),g.call(navigator,f,a,d)):(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Not supported"}),d("getUserMedia not supported"))})["catch"](function(a){var c=a.message,d=a.name,e=a.constraint;b("RTWebUserActionLogger").logError({errorDomain:"GetUserMedia",errorType:(d?d:"unknown GetUserMedia error")+":"+(c?" "+c:"")+(e?" "+e:"")});throw b("UserMediaRequestError").createFromNative(a)})},_parseConstraints:function(a,c){if(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")){var d=a.audio,e=a.video,f={};d!==void 0&&(f.audio=b("RTCUserMediaConstraints").chromify(d));e!==void 0&&(f.video=b("RTCUserMediaConstraints").chromify(e,c));return f}return a},_maybeSupportFilteredStreams:function(a,b){return a},getUserMediaWithValidation:function(a,c,d,e){c===void 0&&(c={audio:!0,video:!0});d===void 0&&(d=5);e===void 0&&(e={audio:1e3,video:1e3});return new(b("Promise"))(function(f,g){var h=function d(h){k.getUserMedia(a).then(function(d){return b("RTCMediaStreamValidator").validate(d,a,c,e).then(function(a){return f({stream:a})})["catch"](function(a){if(a.message===i||a.message===j)f({stream:d,err:a});else{k.stopMediaStream(d);throw a}})},g)["catch"](function(a){h>0?d(h-1):g(a)})};h(d)})},isFullScreen:function(){return Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function(a){a===void 0&&(a=document.documentElement),typeof a.requestFullscreen==="function"?a.requestFullscreen():typeof a.msRequestFullscreen==="function"?a.msRequestFullscreen():typeof a.mozRequestFullScreen==="function"?a.mozRequestFullScreen():typeof a.webkitRequestFullscreen==="function"&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){typeof document.exitFullscreen==="function"?document.exitFullscreen():typeof document.msExitFullscreen==="function"?document.msExitFullscreen():typeof document.mozCancelFullScreen==="function"?document.mozCancelFullScreen():typeof document.webkitExitFullscreen==="function"&&document.webkitExitFullscreen()},toggleFullScreen:function(){k.isFullScreen()?k.exitFullScreen():k.requestFullScreen()},endCallReasonFromHangupReason:function(a){return b("RTCEndCallReason").fromHangupReason(a).getReasonID()},endCallReasonFromDismissRequest:function(a){return b("RTCEndCallReason").fromDismissRequest(a).getReasonID()},endCallSubreasonFromDismissRequest:function(a){return b("RTCEndCallReason").subreasonFromDismissRequest(a)},endCallReasonFromResponseStatusCode:function(a){return b("RTCEndCallReason").fromResponseStatusCode(a).getReasonID()},stopMediaStream:function(a){if(!a.active&&"active"in a)return;a.getTracks().forEach(function(a){a.readyState!=="ended"&&a.stop()})},transferAudioTracks:function(a,b){for(var c=b.getAudioTracks(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.addTrack(f);b.removeTrack(f)}},payloadParticipantsToRTCUsers:function(a){return a.map(function(a){var c=a.big_image_src||a.image_src;a.fbid||g(0,1174);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(h||(h=b("URI")))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})})},getStreamVideoResolution:function(a){return new(b("Promise"))(function(c,d){var e=document.createElement("video");b("FBRTCUtils").attachMediaStream(e,a);var f=function(){e.removeEventListener("loadedmetadata",g),e.removeEventListener("error",h),b("FBRTCUtils").attachMediaStream(e,null)},g=function(){c({height:e.videoHeight,width:e.videoWidth}),f()},h=function(){d(e.error),f()};e.addEventListener("loadedmetadata",g);e.addEventListener("error",h)})},isScreenSharingSupported:function(){return b("UserAgent").isBrowser("Chrome")||k.isVCScreenSharingSupported()},isVCScreenSharingSupported:function(){return b("FBRTCConfig").isVCEndpointCall()&&b("gkx")("1738376")},filterDevicesByKind:function(a,b){return a?a.filter(function(a){return a.kind===b}):[]},isDevicePresent:function(a,b){return a==null?!1:a.some(function(a){return a.deviceId===b})}};e.exports=k}),null);
__d("RTCUtils.bs",["RTCUtils"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("RTCUtils").getUserMedia(a)}function c(a){b("RTCUtils").stopMediaStream(a)}f.getUserMedia=a;f.stopMediaStream=c}),null);
__d("MWChatAudioRecorderAPI.bs",["Promise","RTCUtils.bs","bs_caml_option","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a){var c={contents:void 0},d=new Map(),e=new Map(),f={contents:0},g={contents:0},h={contents:0};return{startRecording:function(a){h.contents=Date.now(),d.forEach(function(c,a,d){return b("bs_curry")._1(c,void 0)})},stopRecording:function(a){a=c.contents;a!==void 0&&b("RTCUtils.bs").stopMediaStream(b("bs_caml_option").valFromOption(a));return b("Promise").all(Array.from(e.entries()).map(function(a){return b("bs_curry")._1(a[1],void 0)})).then(function(a){return b("Promise").resolve(void 0)})},onStartRecording:function(a){var b=f.contents;f.contents=f.contents+1|0;d.set(b,a);return function(a){return d["delete"](b)}},onStopRecording:function(a){var b=g.contents;g.contents=g.contents+1|0;e.set(b,a);return function(a){return e["delete"](b)}},getStartTime:function(a){return h.contents},getAudioStreamRef:function(a){return c},resetStartTime:function(a){h.contents=0}}}c=250;f.cELAPSED_TIME_UPDATE_INTV_MS=c;f.createAudioAPI=a}),null);
__d("MWChatAudioRecorderStreamSetup.bs",["MWChatAudioLog.bs","Promise","RTCUtils.bs","bs_caml_js_exceptions","bs_caml_obj","bs_caml_option","bs_curry","promiseDone"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){var g=function(a){return b("RTCUtils.bs").getUserMedia({video:!1,audio:!0}).then(function(a){return b("Promise").resolve(b("bs_caml_option").some(a))})["catch"](function(a){a=b("bs_caml_js_exceptions").caml_as_js_exn(a);var c=0;a!==void 0&&b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(a).name,"NotAllowedError")?(b("bs_curry")._1(e,function(a){return 2}),b("bs_curry")._1(f,void 0),b("MWChatAudioLog.bs").logBrowserDenyAccess(void 0)):c=1;c===1&&(b("bs_curry")._1(e,function(a){return 3}),b("MWChatAudioLog.bs").logBrowserDenyAccess(void 0));b("MWChatAudioLog.bs").logBrowserDenyAccess(void 0);return b("Promise").resolve(void 0)})},h=function(f){if(c.current){a.contents=b("bs_caml_option").some(f);b("bs_curry")._1(e,function(a){return 1});b("bs_curry")._1(d,void 0);return b("MWChatAudioLog.bs").logBrowserAllowAccess(void 0)}else return b("RTCUtils.bs").stopMediaStream(f)};g=g(void 0).then(function(a){a!==void 0?h(b("bs_caml_option").valFromOption(a)):b("bs_curry")._1(f,void 0);return b("Promise").resolve(void 0)});b("promiseDone")(g,void 0,void 0);g=a.contents;if(g!==void 0)return b("RTCUtils.bs").stopMediaStream(b("bs_caml_option").valFromOption(g))}f.setupStream=a}),null);
__d("MWChatContextualActionsMenu.bs",["fbt","CometComponentWithKeyCommands.react","CometKeys","CometLazyDialogTrigger.react","CometPopover.react","CometPressable.react","JSResource","KeyCommandHandler.react","LsTargetType.bs","MWChatMessageCellFocusTable.bs","MWLSLogMessageClick.bs","ODS","UseMWChatForward.re","bs_curry","cr:1906113","focusScopeQueries","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={itemContainer:{display:"j83agx80",boxSizing:"rq0escxv",paddingTop:"fdg1wqfs",paddingEnd:"jxrgncrl",paddingBottom:"ae35evdt",paddingStart:"qnrpqo6b",justifyContent:"taijpn5t",color:"oo9gr5id",fontSize:"gfeo3gy3"},button:{paddingTop:"fdg1wqfs",paddingEnd:"jxrgncrl",paddingBottom:"ae35evdt",paddingStart:"qnrpqo6b"}};function l(a){}c={key:b("CometKeys").UP};d={key:b("CometKeys").DOWN};var m=[{command:c,description:g._("\u0110\u00f3ng menu ph\u1ee5 v\u1ec1 c\u00e1c h\u00e0nh \u0111\u1ed9ng kh\u00e1c"),handler:function(a){}},{command:d,description:g._("\u0110\u00f3ng menu ph\u1ee5 v\u1ec1 c\u00e1c h\u00e0nh \u0111\u1ed9ng kh\u00e1c"),handler:function(a){}}];function a(a){var c=a.onClose,d=a.onRemoveLocally,e=a.onRemoveGlobally,f=a.onForward,h=a.onReply,n=a.checkCanRemoveGlobally,o=a.showForward,p=a.showRemove,q=a.showReply,r=a.messageID,s=a.isSaved,t=a.isPinned,u=a.toggleSaveStatus,v=a.forwardLabel,w=a.replyLabel,x=a.closeActionsMenu,y=g._("G\u1ee1 tin nh\u1eafn");a=b("gkx")("1992105")?o:!1;var z=g._("Nh\u1eafc t\u00f4i");o=s?g._("B\u1ecf l\u01b0u"):g._("L\u01b0u");s=s?"messenger_unsave_message_menu_button":"messenger_save_message_menu_button";var A=b("UseMWChatForward.re").useMWChatForward({onClose:l,onSend:b("bs_curry").__1(f),messageID:r});f=function(a){var d=a.key;if(d==="Escape")return b("bs_curry")._1(x,void 0);else if(d==="ArrowUp"||d==="ArrowDown"){b("bs_curry")._1(c,void 0);a.stopPropagation();return}else if(d==="ArrowLeft"||d==="ArrowRight"||d==="PageUp"||d==="PageDown"||d==="Home"||d==="End"){a.stopPropagation();return}else return};var B=g._("H\u00e0nh \u0111\u1ed9ng kh\u00e1c");return j.jsx(b("CometPopover.react"),{withArrow:!0,autoFocus:!0,children:j.jsx(b("CometComponentWithKeyCommands.react"),{commandConfigs:m,xstyle:!1,children:j.jsx(b("KeyCommandHandler.react"),{children:j.jsx(b("MWChatMessageCellFocusTable.bs").Table_.Table.make,{tabScopeQuery:b("focusScopeQueries").tabbableScopeQuery,wrapX:!0,children:j.jsx(b("MWChatMessageCellFocusTable.bs").Table_.Row.make,{children:j.createElement("div",{role:"menu","aria-orientation":"horizontal","aria-label":B,className:(i||(i=b("stylex")))(k.itemContainer)},p?j.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWChatRemoveMessageDialogForJSResource.react").__setRef("MWChatContextualActionsMenu.bs"),dialogProps:{onClose:c,onRemoveLocally:d,onRemoveGlobally:e,checkCanRemoveGlobally:n},children:function(a,c){return j.jsx(b("MWChatMessageCellFocusTable.bs").Table_.Cell.make,{children:j.jsx(b("CometPressable.react"),{"aria-label":y,role:"menuitem",ref:c,testid:"messenger_contextual_actions_remove_button",onPress:function(c){b("ODS").bumpEntityKey(3185,"mwchat_actions","remove");b("MWLSLogMessageClick.bs").logMessageClicked(r,b("LsTargetType.bs").removeButton,void 0,void 0);return b("bs_curry")._1(a,void 0)},overlayRadius:5,xstyle:k.button,focusable:!0,children:g._("X\u00f3a, g\u1ee1 b\u1ecf")})})}}):null,a?j.jsx(b("MWChatMessageCellFocusTable.bs").Table_.Cell.make,{children:j.jsx(b("CometPressable.react"),{"aria-label":v,role:"menuitem",testid:"messenger_contextual_actions_forward_button",onPress:function(a){b("ODS").bumpEntityKey(3185,"mwchat_actions","forward");b("MWLSLogMessageClick.bs").logMessageClicked(r,b("LsTargetType.bs").forwardButton,void 0,void 0);if(!(A==null))return b("bs_curry")._1(A.onClick,void 0)},overlayRadius:5,xstyle:k.button,focusable:!0,children:v})}):null,q?j.jsx(b("MWChatMessageCellFocusTable.bs").Table_.Cell.make,{children:j.jsx(b("CometPressable.react"),{"aria-label":w,role:"menuitem",testid:"messenger_contextual_actions_reply_button",onPress:function(a){return b("bs_curry")._1(h,void 0)},overlayRadius:5,xstyle:k.button,focusable:!0,children:w})}):null,b("gkx")("1906114")?j.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("ChatGeminiSetReminderDialog.react").__setRef("MWChatContextualActionsMenu.bs"),dialogProps:{onClose:function(a){}},children:function(a,c){return j.jsx(b("MWChatMessageCellFocusTable.bs").Table_.Cell.make,{children:j.jsx(b("CometPressable.react"),{"aria-label":z,role:"menuitem",ref:c,onPress:function(c){return b("bs_curry")._1(a,void 0)},overlayRadius:5,xstyle:k.button,focusable:!0,children:z})})}}):null,b("gkx")("1906115")?j.jsx(b("MWChatMessageCellFocusTable.bs").Table_.Cell.make,{children:j.jsx(b("CometPressable.react"),{"aria-label":o,role:"menuitem",testid:s,onPress:function(a){b("bs_curry")._1(u,void 0);b("ODS").bumpEntityKey(3185,"mwchat_actions","toggleSaveStatus");b("bs_curry")._1(c,void 0);return b("bs_curry")._1(x,void 0)},overlayRadius:5,xstyle:k.button,focusable:!0,children:o})}):null,b("cr:1906113")==null?null:j.jsx(b("cr:1906113").make,{isPinned:t,onClose:function(a){b("bs_curry")._1(c,void 0);return b("bs_curry")._1(x,void 0)}}))})}),onKeyDown:f})})})}e=b("cr:1906113");a=a;f.styles=k;f.$MWChatPinnedMessageAction$requireCond=b("cr:1906113");f.mwChatPinnedMessageAction=e;f.noop=l;f.keyUp=c;f.keyDown=d;f.commandConfigs=m;f.make=a}),null);
__d("MWChatContextualActionsMenu.re",["MWChatContextualActionsMenu.bs"],(function(a,b,c,d,e,f){a=b("MWChatContextualActionsMenu.bs").make;f.make=a}),null);
__d("MWChatContextualActionsMenuDeferred.react",["MWChatContextualActionsMenu.re"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("MWChatContextualActionsMenu.re").make}),98);
__d("LsMessageClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743853");c=b("FalcoLoggerInternal").create("ls_message_click",a);e.exports=c}),null);
__d("MessageRequestsInfoBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("258");c=b("FalcoLoggerInternal").create("message_requests_info_banner_shown",a);e.exports=c}),null);
__d("MessageRequestsThreadActionConfirmedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("259");c=b("FalcoLoggerInternal").create("message_requests_thread_action_confirmed",a);e.exports=c}),null);
__d("MessageRequestsThreadActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("260");c=b("FalcoLoggerInternal").create("message_requests_thread_action_tapped",a);e.exports=c}),null);
__d("MessageRequestsThreadDenialOptionsTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("261");c=b("FalcoLoggerInternal").create("message_requests_thread_denial_options_tapped",a);e.exports=c}),null);